<?xml version="1.0" encoding="UTF-8"?>
<configuration xmlns="urn:activemq"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="urn:activemq /schema/artemis-configuration.xsd">

   <core xmlns="urn:activemq:core">
      <name>artemis</name>
      <persistence-enabled>true</persistence-enabled>
      <journal-type>ASYNCIO</journal-type>
      <paging-directory>data/paging</paging-directory>
      <bindings-directory>data/bindings</bindings-directory>
      <journal-directory>data/journal</journal-directory>
      <large-messages-directory>data/large-messages</large-messages-directory>
      <journal-datasync>true</journal-datasync>
      <journal-min-files>2</journal-min-files>
      <journal-pool-files>10</journal-pool-files>
      <journal-device-block-size>4096</journal-device-block-size>
      <journal-file-size>10M</journal-file-size>
      <journal-buffer-timeout>10000</journal-buffer-timeout>
      <journal-max-io>4096</journal-max-io>
      <disk-scan-period>5000</disk-scan-period>
      <max-disk-usage>90</max-disk-usage>
      <critical-analyzer>true</critical-analyzer>
      <critical-analyzer-timeout>120000</critical-analyzer-timeout>
      <critical-analyzer-check-period>60000</critical-analyzer-check-period>
      <critical-analyzer-policy>HALT</critical-analyzer-policy>
      <page-sync-timeout>10000</page-sync-timeout>

      <acceptors>
         <acceptor name="artemis">tcp://0.0.0.0:61616?tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;amqpMinLargeMessageSize=102400;protocols=CORE,AMQP,STOMP,HORNETQ,MQTT,OPENWIRE;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpDuplicateDetection=true;supportAdvisory=false;suppressInternalManagementObjects=false</acceptor>
         <acceptor name="amqp">tcp://0.0.0.0:5672?tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;protocols=AMQP;useEpoll=true;amqpCredits=1000;amqpLowCredits=300;amqpMinLargeMessageSize=102400;amqpDuplicateDetection=true</acceptor>
         <acceptor name="stomp">tcp://0.0.0.0:61613?tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;protocols=STOMP;useEpoll=true</acceptor>
         <acceptor name="hornetq">tcp://0.0.0.0:5445?anycastPrefix=jms.queue.;multicastPrefix=jms.topic.;protocols=HORNETQ,STOMP;useEpoll=true</acceptor>
         <acceptor name="mqtt">tcp://0.0.0.0:1883?tcpSendBufferSize=1048576;tcpReceiveBufferSize=1048576;protocols=MQTT;useEpoll=true</acceptor>
      </acceptors>

      <security-settings>
         <security-setting match="#">
            <permission type="createNonDurableQueue" roles="admin,user"/>
            <permission type="deleteNonDurableQueue" roles="admin,user"/>
            <permission type="createDurableQueue" roles="admin,user"/>
            <permission type="deleteDurableQueue" roles="admin,user"/>
            <permission type="createAddress" roles="admin,user"/>
            <permission type="deleteAddress" roles="admin,user"/>
            <permission type="consume" roles="admin,user"/>
            <permission type="browse" roles="admin,user"/>
            <permission type="send" roles="admin,user"/>
            <permission type="manage" roles="admin"/>
         </security-setting>
      </security-settings>

      <address-settings>
         <address-setting match="#">
            <dead-letter-address>jms.queue.DLQ</dead-letter-address>
            <expiry-address>jms.queue.ExpiryQueue</expiry-address>
            <redelivery-delay>0</redelivery-delay>
            <max-delivery-attempts>10</max-delivery-attempts>
            <max-size-bytes>-1</max-size-bytes>
            <page-size-bytes>2M</page-size-bytes>
            <page-max-cache-size>5</page-max-cache-size>
            <address-full-policy>PAGE</address-full-policy>
            <auto-create-queues>true</auto-create-queues>
            <auto-create-addresses>true</auto-create-addresses>
            <auto-create-jms-queues>true</auto-create-jms-queues>
            <auto-create-jms-topics>true</auto-create-jms-topics>
            <auto-delete-queues>false</auto-delete-queues>
            <auto-delete-addresses>false</auto-delete-addresses>
            <auto-delete-jms-queues>false</auto-delete-jms-queues>
            <auto-delete-jms-topics>false</auto-delete-jms-topics>
            <config-delete-queues>OFF</config-delete-queues>
            <config-delete-addresses>OFF</config-delete-addresses>
            <max-size-bytes-reject-threshold>-1</max-size-bytes-reject-threshold>
            <default-last-value-key>_AMQ_LVQ_NAME</default-last-value-key>
            <default-non-destructive>false</default-non-destructive>
            <default-exclusive-queue>false</default-exclusive-queue>
            <default-group-rebalance>false</default-group-rebalance>
            <default-group-rebalance-pause-dispatch>false</default-group-rebalance-pause-dispatch>
            <default-group-buckets>-1</default-group-buckets>
            <default-group-first-key>_AMQ_GROUP_ID</default-group-first-key>
            <redistribution-delay>1000</redistribution-delay>
            <send-to-dla-on-no-route>false</send-to-dla-on-no-route>
            <slow-consumer-threshold>-1</slow-consumer-threshold>
            <slow-consumer-policy>NOTIFY</slow-consumer-policy>
            <slow-consumer-check-period>5</slow-consumer-check-period>
            <auto-create-dead-letter-resources>false</auto-create-dead-letter-resources>
            <dead-letter-queue-prefix>DLQ.</dead-letter-queue-prefix>
            <dead-letter-queue-suffix></dead-letter-queue-suffix>
            <auto-create-expiry-resources>false</auto-create-expiry-resources>
            <expiry-queue-prefix>EXP.</expiry-queue-prefix>
            <expiry-queue-suffix></expiry-queue-suffix>
            <enable-metrics>true</enable-metrics>
         </address-setting>
      </address-settings>

      <addresses>
         <address name="jms.queue.DLQ">
            <anycast>
               <queue name="jms.queue.DLQ" />
            </anycast>
         </address>
         <address name="jms.queue.ExpiryQueue">
            <anycast>
               <queue name="jms.queue.ExpiryQueue" />
            </anycast>
         </address>
         <address name="jms.topic.notifications">
            <multicast />
         </address>
         <address name="jms.queue.orders">
            <anycast>
               <queue name="jms.queue.orders">
                  <durable>true</durable>
               </queue>
            </anycast>
         </address>
      </addresses>

      <metrics>
         <jvm-memory>true</jvm-memory>
         <jvm-gc>true</jvm-gc>
         <jvm-threads>true</jvm-threads>
         <netty-pool>true</netty-pool>
         <file-descriptors>true</file-descriptors>
         <processor>true</processor>
         <uptime>true</uptime>
      </metrics>

   </core>
</configuration>
